# 一、基本信息和服务器准备

这部分记录了服务器准备信息。

## 基本信息

需要的准备内容：

1. 3 台能上网的 Linux 服务器，这次我用的是 Rocky Linux 8
2. 3 个同网段的 IP，挂在这 3 台服务器上

计划表如下：

| 角色   | IP           | 要在上面安装的组件                                                                                    |
| ------ | ------------ | ----------------------------------------------------------------------------------------------------- |
| master | 192.168.56.10 | <ul><li>kube-apiserver</li> <li>kube-controller-manager</li><li>kube-scheduler</li><li>etcd</li></ul> |
| node01 | 192.168.56.11 | <ul><li>containerd</li><li>kubelet</li> <li>kube-proxy</li> </ul>                                     |
| node02 | 192.168.56.12 | <ul><li>containerd</li><li>kubelet</li> <li>kube-proxy</li> </ul>                                     |

:::warning
项目中包含了一个 Vagrantfile，用来快速启动 3 个服务器
:::

## 服务器准备

设置这 3 台服务器的 hostname

```
hostnamectl set-hostname (master|node01|node01)
```

把这三个 hostname 都写在 /etc/hosts 里面

```/etc/hosts
192.168.56.10 master
192.168.56.11 node01
192.168.56.12 node02
```

设置好时间和时区（根据自己的实际情况进行设置）

```
timedatectl set-timezone <你的时区>
```


在 3 台服务器上安装一些基础工具

```
dnf install wget vim
```

master 节点还要安装 OpenSSL，一会儿我们在这台机器上创建证书

```
dnf install openssl
```

node 节点还要安装一些后面要用到的工具

```
dnf install socat conntrack ipset
```

## 有关网络的特别说明

执行 `ip addr`

如果你的机器上只有 `lo` 和 `eth0`，那么在本次设置中，你的主网卡就是 eth0。

如果你使用了 Virtualbox，